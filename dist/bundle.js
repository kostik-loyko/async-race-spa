(()=>{"use strict";var e={766:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var i=n(91),a=n.n(i),c=new URL(n(902),n.b);const o='<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>async-race-spa</title> </head> <body> <div class="container"> <div class="wrapper"> <img class="falg" src="'+a()(c)+'" alt="flag"> </div> </div> </body> </html>'},91:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},187:(e,t,n)=>{n.r(t)},50:(e,t,n)=>{n.r(t)},723:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,c){function o(e){try{s(i.next(e))}catch(e){c(e)}}function r(e){try{s(i.throw(e))}catch(e){c(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getCars=void 0,t.getCars=()=>n(void 0,void 0,void 0,(function*(){let e=yield fetch("http://127.0.0.1:3000/garage");return yield e.json()}))},94:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(537));t.default=function(){(0,a.default)()}},316:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,c){function o(e){try{s(i.next(e))}catch(e){c(e)}}function r(e){try{s(i.throw(e))}catch(e){c(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n(this,void 0,void 0,(function*(){e.insertAdjacentHTML("beforeend",'<div class="container-config">\n  <div class="create">\n    <input type="text" class="create-input">\n    <div class="create-color"></div>\n    <button class="create-btn btn-main">create</button>\n  </div>\n  <div class="update">\n    <input type="text" class="update-input">\n    <div class="update-color"></div>\n    <button class="update-btn btn-main">update</button>\n  </div>\n  <div class="race">\n    <button class="race-rase-btn btn-main">race</button>\n    <button class="race-reset-btn btn-main">reset</button>\n    <button class="race-cars-btn btn-main">create cars</button>\n  </div>\n</div>')}))}},146:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(259)),c=i(n(709)),o=i(n(316));t.default=()=>{const e=document.createElement("div");e.className="conteiner-main",document.querySelector(".wrapper").append(e),(0,a.default)(e),(0,o.default)(e),(0,c.default)(e)}},869:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,c){function o(e){try{s(i.next(e))}catch(e){c(e)}}function r(e){try{s(i.throw(e))}catch(e){c(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=()=>n(void 0,void 0,void 0,(function*(){document.querySelectorAll(".conteiner-car").forEach((e=>{const t=e.querySelector(".car-img"),i=e.querySelector(".car-btn-move"),a=e.querySelector(".car-btn-stop");n(void 0,void 0,void 0,(function*(){let e,c=yield fetch(`http://127.0.0.1:3000/engine?id=${t.id}&status=started`,{method:"PATCH"}),o=yield c.json(),r=o.distance/o.velocity/1e3;i.addEventListener("click",(()=>{n(void 0,void 0,void 0,(function*(){yield fetch(`http://127.0.0.1:3000/engine?id=${t.id}&status=started`,{method:"PATCH"})}));let a=(new Date).getTime();!function n(){let i=14+((new Date).getTime()-a)/1e3*(1.5*r);t.style.left=`${i+1}%`,i<92&&(e=window.requestAnimationFrame(n))}(),n(void 0,void 0,void 0,(function*(){try{yield fetch(`http://127.0.0.1:3000/engine?id=${t.id}&status=drive`,{method:"PATCH"})}catch(t){cancelAnimationFrame(e)}})),i.classList.add("car-btn-move-active")})),a.addEventListener("click",(()=>{n(void 0,void 0,void 0,(function*(){yield fetch(`http://127.0.0.1:3000/engine?id=${t.id}&status=stopped`,{method:"PATCH"})})),cancelAnimationFrame(e),t.style.left="14%",i.classList.remove("car-btn-move-active")}))}))}))}))},737:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,c){function o(e){try{s(i.next(e))}catch(e){c(e)}}function r(e){try{s(i.throw(e))}catch(e){c(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=n(723);t.default=()=>i(void 0,void 0,void 0,(function*(){const e=document.querySelector(".race-rase-btn"),t=document.querySelector(".race-reset-btn"),n=document.querySelectorAll(".conteiner-car");let c,o=yield(0,a.getCars)(),r=0;e.addEventListener("click",(()=>{e.setAttribute("disabled","disabled"),e.classList.add("race-rase-btn-disabled"),n.forEach((a=>{const s=a.querySelector(".car-img"),u=a.querySelector(".car-btn-stop"),d=a.querySelector(".car-btn-move");i(void 0,void 0,void 0,(function*(){let e=yield fetch(`http://127.0.0.1:3000/engine?id=${s.id}&status=started`,{method:"PATCH"}),t=yield e.json(),n=t.distance/t.velocity/1e3,a=(new Date).getTime();!function e(){let t=14+((new Date).getTime()-a)/1e3*(1.5*n);s.style.left=`${t+1}%`,t<92?c=window.requestAnimationFrame(e):t>=92&&o.forEach((e=>{if(e.id==s.id&&0===r){r++;let t=document.createElement("h2");t.className="winner",t.textContent=`Winner ${e.name}`,document.body.append(t)}})),u.addEventListener("click",(()=>{cancelAnimationFrame(c),s.style.left="14%"}))}(),i(void 0,void 0,void 0,(function*(){try{yield fetch(`http://127.0.0.1:3000/engine?id=${s.id}&status=drive`,{method:"PATCH"})}catch(e){cancelAnimationFrame(c)}}))})),t.addEventListener("click",(()=>{r=0,e.removeAttribute("disabled"),e.classList.remove("race-rase-btn-disabled"),d.classList.remove("car-btn-move-active"),n.forEach((e=>{const t=e.querySelector(".car-img");cancelAnimationFrame(c),t.style.left="14%"}))}))}))}))}))},709:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,c){function o(e){try{s(i.next(e))}catch(e){c(e)}}function r(e){try{s(i.throw(e))}catch(e){c(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}s((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=a(n(869)),o=n(723),r=a(n(737));t.default=function(e){return i(this,void 0,void 0,(function*(){(yield(0,o.getCars)()).forEach((t=>{let n=`<div class="conteiner-car">\n  <div class="conteiner-car-btns">\n    <button class="car-btn-select btn-main">select</button>\n    <button class="car-btn-remove btn-main">remove</button>\n    <h3 class="car-title">${t.name}</h3>\n  </div>\n  <div class="conteiner-car-car">\n    <button class="car-btn-move">Move</button>\n    <button class="car-btn-stop">Back</button>\n    <svg class="car-img" id="${t.id}" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"\n      fill="${t.color}">\n      <path\n        d="M23.5 7c.276 0 .5.224.5.5v.511c0 .793-.926.989-1.616.989l-1.086-2h2.202zm-1.441 3.506c.639 1.186.946 2.252.946 3.666 0 1.37-.397 2.533-1.005 3.981v1.847c0 .552-.448 1-1 1h-1.5c-.552 0-1-.448-1-1v-1h-13v1c0 .552-.448 1-1 1h-1.5c-.552 0-1-.448-1-1v-1.847c-.608-1.448-1.005-2.611-1.005-3.981 0-1.414.307-2.48.946-3.666.829-1.537 1.851-3.453 2.93-5.252.828-1.382 1.262-1.707 2.278-1.889 1.532-.275 2.918-.365 4.851-.365s3.319.09 4.851.365c1.016.182 1.45.507 2.278 1.889 1.079 1.799 2.101 3.715 2.93 5.252zm-16.059 2.994c0-.828-.672-1.5-1.5-1.5s-1.5.672-1.5 1.5.672 1.5 1.5 1.5 1.5-.672 1.5-1.5zm10 1c0-.276-.224-.5-.5-.5h-7c-.276 0-.5.224-.5.5s.224.5.5.5h7c.276 0 .5-.224.5-.5zm2.941-5.527s-.74-1.826-1.631-3.142c-.202-.298-.515-.502-.869-.566-1.511-.272-2.835-.359-4.441-.359s-2.93.087-4.441.359c-.354.063-.667.267-.869.566-.891 1.315-1.631 3.142-1.631 3.142 1.64.313 4.309.497 6.941.497s5.301-.184 6.941-.497zm2.059 4.527c0-.828-.672-1.5-1.5-1.5s-1.5.672-1.5 1.5.672 1.5 1.5 1.5 1.5-.672 1.5-1.5zm-18.298-6.5h-2.202c-.276 0-.5.224-.5.5v.511c0 .793.926.989 1.616.989l1.086-2z" />\n    </svg>\n    <img class="falg-img" src="./asset/icons8-flag-filled-96.png" alt="flag">\n  </div>\n</div>`;e.insertAdjacentHTML("beforeend",n)})),(0,c.default)(),(0,r.default)()}))}},259:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,c){function o(e){try{s(i.next(e))}catch(e){c(e)}}function r(e){try{s(i.throw(e))}catch(e){c(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n(this,void 0,void 0,(function*(){let t=yield fetch("http://127.0.0.1:3000/garage"),n=`<div class="conteiner-title">\n    <h1 class="page-name">Garage (${(yield t.json()).length})</h1>\n    <h2 class="page-counter">Page #</h2>\n  </div>`;e.insertAdjacentHTML("beforeend",n)}))}},537:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(146)),c=i(n(139));t.default=()=>{const e=document.createElement("a");e.className="btn-main",e.id="main-page",e.href="#main-page",e.textContent="garage";const t=document.createElement("a");t.className="btn-main",t.id="statistics-page",t.textContent="statistics",t.href="#statistics-page",document.querySelector(".wrapper").append(e,t),(0,a.default)(),window.location.hash="#main-page",window.addEventListener("hashchange",(()=>{const n=window.location.hash.slice(1);document.querySelector(".wrapper").removeChild(document.querySelector(".conteiner-main")),n===e.id?(0,a.default)():n===t.id&&(0,c.default)()}))}},139:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(831));t.default=()=>{const e=document.createElement("div");e.className="conteiner-main",document.querySelector(".wrapper").append(e),(0,a.default)(e)}},831:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,c){function o(e){try{s(i.next(e))}catch(e){c(e)}}function r(e){try{s(i.throw(e))}catch(e){c(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n(this,void 0,void 0,(function*(){e.insertAdjacentHTML("beforeend",'<div class="conteiner-title">\n    <h1 class="page-name">Winners ()</h1>\n    <h2 class="page-counter">Page #</h2>\n  </div>')}))}},930:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(766),n(50),n(187),(0,i(n(94)).default)()},902:(e,t,n)=>{e.exports=n.p+"asset/icons8-flag-filled-96.png"}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var c=t[i]={exports:{}};return e[i].call(c.exports,c,c.exports,n),c.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n(930)})();